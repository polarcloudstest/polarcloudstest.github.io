<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="prefer-datetime-locale" content="en-gb"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="vSphere Compliance with vRealize Operations and Tagging - Part 2" /><meta property="og:locale" content="en" /><meta name="description" content="Monitoring and Reporting Regulatory Compliance" /><meta property="og:description" content="Monitoring and Reporting Regulatory Compliance" /><link rel="canonical" href="/posts/vsphere-compliance-with-vro-pt2/" /><meta property="og:url" content="/posts/vsphere-compliance-with-vro-pt2/" /><meta property="og:site_name" content="PolarClouds" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-05T01:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="vSphere Compliance with vRealize Operations and Tagging - Part 2" /><meta name="twitter:site" content="@chall32" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-08-08T17:15:08+01:00","datePublished":"2022-07-05T01:00:00+01:00","description":"Monitoring and Reporting Regulatory Compliance","headline":"vSphere Compliance with vRealize Operations and Tagging - Part 2","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/vsphere-compliance-with-vro-pt2/"},"url":"/posts/vsphere-compliance-with-vro-pt2/"}</script><title>vSphere Compliance with vRealize Operations and Tagging - Part 2 | PolarClouds</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="PolarClouds"><meta name="application-name" content="PolarClouds"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://polarclouds.co.uk/images/pages/ch200x200.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">PolarClouds</a></div><div class="site-subtitle font-italic">The personal blog of me, Chris Hall</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/chall32" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/chall32" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','domain.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>vSphere Compliance with vRealize Operations and Tagging - Part 2</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>vSphere Compliance with vRealize Operations and Tagging - Part 2</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1656979200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 5, 2022 </em> </span> <span> Updated <em class="" data-ts="1659975308" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Aug 8, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/chall32">Chris Hall</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1654 words"> <em>9 min</em> read</span></div></div></div><div class="post-content"><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3C/svg%3E" data-src="/images/vsphere-compliance-with-vro/vsphere-compliance-with-vro-01.png" alt="NSX-T Logo" width="200" height="200" style="max-width: 200px" class="right" data-proofer-ignore> Last time we looked at regulatory compliance standards and benchmarks, vSphere tag creation and application and finally for the majority of the post at configuring vRealize Operations to continually monitor for system hardening standard / benchmark compliance.</p><p>If you have not yet seen that post, catch up now. It’s a great read. :wink:</p><p>As mentioned, this post is part 2 of a multipart series. Find the other parts here:</p><ul><li>Part 1: <a href="/posts/vsphere-compliance-with-vro/" target="_blank">Creating Continual Regulatory Compliance</a>)<li>Part 2: This part: Monitoring and Reporting Regulatory Compliance</ul><h2 id="monitoring-compliance"><span class="mr-2">Monitoring Compliance</span><a href="#monitoring-compliance" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>We need a dashboard. Let’s create one! Luckily for us vRealize Operations (vRO) has just the thing.</p><p>From the vRO console, select <strong>Visualise &gt; Dashboards</strong> and let’s search for compliance:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-01.png" alt="Find Compliance Dashboard" data-proofer-ignore></p><p>Not sure why the built in compliance dashboard is deprecated, but hey lets use it as a base for a new custom dashboard anyway. Taking a look at the dashboard:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-02.png" alt="vSphere Compliance Dashboard" data-proofer-ignore></p><p>Nice. Let’s clone the dashboard to create our own. Click <strong>Manage</strong> and filter on <strong>compliance</strong> to find the dashboard in the dashboard library:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-03.png" alt="Find Compliance Dashboard in Library" data-proofer-ignore></p><p>Use the three vertical dots to clone the dashboard:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-04.png" alt="Clone Dashboard" data-proofer-ignore></p><p>I’ll name my new dashboard <strong>PolarClouds CIS Security Compliance</strong>:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-05.png" alt="Name Clone Dashboard" data-proofer-ignore></p><p>Again, using the three vertical dots, let’s edit the PolarClouds CIS Security Compliance dashboard. I’m not going to go into super detail here as dashboards are a can be subject to personal taste, but here are the changes I’ve made (you are of course free to make your own!):</p><ul><li>Removed the vSphere and VM Compliance heat maps:</ul><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-06.png" alt="Remove Heat Maps" data-proofer-ignore></p><ul><li>Group the affected objects by “None”:</ul><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-07.png" alt="Group by None" data-proofer-ignore></p><p>As this is a small environment with eventually zero compliance issues, I’m happy to put the hopefully empty list on non-compliances right on my dashboard! I’ll rename the widget “Non-Compliant Objects” too.</p><p>That’s it. I’ll save the dashboard and using the share button, setting the expiry to <strong>Never Expire</strong>, I’ll grab the link to my nice new dashboard:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-08.png" alt="Share Dashboard" data-proofer-ignore></p><p>Lets take a look at the final dashboard:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-09.png" alt="Final Dashboard" data-proofer-ignore></p><p>Happy with that. Yes, there is some hardening of the environment yet to do, I’ll forward the link to the security and compliance departments.</p><h2 id="reporting-compliance"><span class="mr-2">Reporting Compliance</span><a href="#reporting-compliance" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Next, let’s work on reporting. Reports are consist of one or more views, so we’ll work on creating our views first.</p><p>For my report I’m going to include the following views:</p><ul><li>CIS Compliant Virtual Machines<li>CIS Compliant ESXi Hosts<li>CIS Compliant Virtual Switches<li>CIS Compliant Virtual Switch Port Groups<li>CIS Non-Compliant Virtual Machines<li>CIS Non-Compliant ESXi Hosts<li>CIS Non-Compliant Virtual Switches<li>CIS Non-Compliant Virtual Switch Port Groups<li>CIS Excluded Virtual Machines<li>CIS Excluded ESXi Hosts<li>CIS Excluded Virtual Switches<li>CIS Excluded Virtual Switch Port Groups</ul><p>Sure twelve views is a lot (remember CIS does not harden vCenter), but through the power of cloning and tweaking the filters we really only have to create four views.</p><h3 id="views"><span class="mr-2">Views</span><a href="#views" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="virtual-machines"><span class="mr-2">Virtual Machines</span><a href="#virtual-machines" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>From the vRO console, select <strong>Visualise &gt; Views &gt; Manage &gt; Add</strong> and let’s create a view to add to a report. I’ll call my view “PolarClouds CIS Compliant Virtual Machines” and set the description as “Virtual Machines with vSphere configuration compliant with CIS Hardening Standards”:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-10.png" alt="Compliance Report Title + Description" data-proofer-ignore></p><p>Selecting step 2, lets create some views.</p><p>Click <strong>+</strong> to add a view. We will name this first view <strong>PolarClouds CIS Compliant Virtual Machines</strong> and set the description ro <strong>Virtual Machines with vSphere configuration compliant with CIS Hardening Standards</strong>:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-11.png" alt="Report Compliant VM View Name + Description" data-proofer-ignore></p><p>Next, lets present some data in list form, so select <strong>List</strong>:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-12.png" alt="Report Compliant VM View List" data-proofer-ignore></p><p>Moving onto step 3, lets set our subjects as <strong>vCenter Adaptor &gt; Virtual Machine</strong></p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-13.png" alt="Report Compliant VM Subject List" data-proofer-ignore></p><p>Moving onto step 4, lets find some data to populate our list with. When we find our property / metric, simply drag to add to the list:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-14.png" alt="Report Compliant VM Subject List Drag to Add" data-proofer-ignore></p><p>Label the Metric and add a sort order:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-15.png" alt="Metric + Order" data-proofer-ignore></p><p>The full list of VM properties and metrics I use is, along with their paths is:</p><ul><li>VM IP Address : Properties &gt; Summary &gt; Guest Operating System&gt;Guest OS IP Address<li>VM Operating System : Properties &gt; Summary &gt; Guest Operating System &gt; Guest OS from Tools<li>VM CIS Compliance : Metrics &gt; Badge &gt; Compliance (%)</ul><p>Next, lets filter to show only the VMs that are 100% compliant:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-16.png" alt="Filter Compliant VMs" data-proofer-ignore></p><p>The final configuration of the view:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-17.png" alt="Compliant VMs View" data-proofer-ignore></p><p>Finally click <strong>Save</strong> to save the view.</p><p>Next we’ll create the CIS Non-Compliant Virtual Machines view.</p><p>Clone the previously created view:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-18.png" alt="Clone Compliant VMs View" data-proofer-ignore></p><p>Update Name and description:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-19.png" alt="Non-Compliant VMs Name + Description" data-proofer-ignore></p><p>Select <strong>4. Data</strong><br /> Change compliance operator to <strong>is not</strong><br /> Add <strong>Properties &gt; vSphere Tag &gt; Current &gt; is not &gt; [&lt; Compliance-CIS-Excluded &gt;]</strong>:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-20.png" alt="VMs is Not Compliant Filter" data-proofer-ignore></p><p>Finally save the view.</p><p>Given that we know that we have some non-compliant VMs, we can preview the view. Select the Non-Compliant view from the Recents list, click <strong>Select preview source</strong> and select <strong>vCenter Adapter &gt; vSphere World . vSphere World</strong>. Looking good:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-21.png" alt="VMs Not Compliant" data-proofer-ignore></p><p>Just our VM with a serial port!</p><p>Finally lets clone and tweak the filter again to create our CIS Excluded Virtual Machines view. I’ve also removed the VM CIS Compliance column from the view.</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-22.png" alt="VMs Excluded 1" data-proofer-ignore></p><p>Using vSphere World as a preview source:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-23.png" alt="VMs Excluded 2" data-proofer-ignore></p><p>Yep our two excluded VMs are listed. Hey presto we have our three VM views:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-24.png" alt="Three VM Views" data-proofer-ignore></p><h4 id="esxi-hosts"><span class="mr-2">ESXi Hosts</span><a href="#esxi-hosts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>From the vRO console, select <strong>Visualise &gt; Views &gt; Manage &gt; Add</strong> and let’s create a view to add to a report. I’ll call my view “PolarClouds CIS Compliant ESXi Hosts” and set the description as “ESXi Hosts with vSphere configuration compliant with CIS Hardening Standards”.</p><p>Again I shall configure presentation in list form and I’ll include the following properties and metrics:</p><ul><li>Host IP Address : Properties &gt; Network &gt; Management Address<li>Host Operating System : Properties &gt; System &gt; Product String<li>Host Version - Build Number: Properties &gt; Summary &gt; Version<li>Host CIS Compliance : Metrics &gt; Badge &gt; Compliance (%)</ul><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-25.png" alt="Host View" data-proofer-ignore></p><p>Again we’ll clone and set our filters accordingly to create the three views:</p><ul><li>CIS Compliant ESXi Hosts<ul><li>Filter : Metrics &gt; Badge &gt; Compliance (%) &gt; Current &gt; is &gt; 100</ul><li>CIS Non-Compliant ESXi Hosts<ul><li>Filter : Metrics &gt; Badge &gt; Compliance (%) &gt; Current &gt; is not &gt; 100<li>And : Properties &gt; Summary &gt; vSphere Tag &gt; Current &gt; is not &gt; [&lt; Compliance-CIS-Excluded &gt;]</ul><li>CIS Excluded ESXi Hosts<ul><li>Filter : Properties &gt; Summary &gt; vSphere Tag &gt; Current &gt; is &gt; [&lt; Compliance-CIS-Excluded &gt;]</ul></ul><h4 id="virtual-switches"><span class="mr-2">Virtual Switches</span><a href="#virtual-switches" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Again three new views with the following properties and metrics:</p><ul><li>Switch Version - Build Number : Properties &gt; Summary &gt; Version<li>Switch CIS Compliance : Metrics &gt; Badge &gt; Compliance (%)</ul><p>Clone and set our filters accordingly to create the three views:</p><ul><li>CIS Compliant Virtual Switches<ul><li>Filter : Metrics &gt; Badge &gt; Compliance (%) &gt; Current &gt; is &gt; 100</ul><li>CIS Non-Compliant Virtual Switches<ul><li>Filter : Metrics &gt; Badge &gt; Compliance (%) &gt; Current &gt; is not &gt; 100<li>And : Properties &gt; Summary &gt; vSphere Tag &gt; Current &gt; is not &gt; [&lt; Compliance-CIS-Excluded &gt;]</ul><li>CIS Excluded ESXi Hosts<ul><li>Filter : Properties &gt; Summary &gt; vSphere Tag &gt; Current &gt; is &gt; [&lt; Compliance-CIS-Excluded &gt;]</ul><h4 id="virtual-switch-port-groups"><span class="mr-2">Virtual Switch Port Groups</span><a href="#virtual-switch-port-groups" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Finally three more views with the following properties and metrics:</p><li>Port Group VLAN ID : Properties &gt; Configuration &gt; Policies &gt; Security &gt; VLAN ID<li>Port Group VLAN Trunk : Properties &gt; Configuration &gt; Policies &gt; Security &gt; VLAN trunk range<li>Port Group CIS Compliance : Metrics &gt; Badge &gt; Compliance (%)</ul><p>Clone and set our filters accordingly to create the three views:</p><ul><li>CIS Compliant Virtual Switch Port Groups<ul><li>Filter : Metrics &gt; Badge &gt; Compliance (%) &gt; Current &gt; is &gt; 100</ul><li>CIS Non-Compliant Virtual Switch Port Groups<ul><li>Filter : Metrics &gt; Badge &gt; Compliance (%) &gt; Current &gt; is not &gt; 100<li>And : Properties &gt; Summary &gt; vSphere Tag &gt; Current &gt; is not &gt; [&lt; Compliance-CIS-Excluded &gt;]</ul><li>CIS Excluded Virtual Switch Port Groups<ul><li>Filter : Properties &gt; Summary &gt; vSphere Tag &gt; Current &gt; is &gt; [&lt; Compliance-CIS-Excluded &gt;]</ul></ul><p>Phew! Done!</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-26.png" alt="PolarClouds Views" data-proofer-ignore></p><h3 id="reports"><span class="mr-2">Reports</span><a href="#reports" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Now that we have sliced and diced out data into views, lets bundle the results into a report for review and action.</p><p>From the vRO console, select <strong>Visualise &gt; Reports &gt; Manage &gt; Add</strong> and let’s create a report. I’ll call my report “PolarClouds vSphere Estate CIS Compliance” and set the description as “Status of vSphere CIS Compliance across the PolarClouds vSphere Estate”</p><p>Next, add the twelve views previously created:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-27.png" alt="PolarClouds Report Views" data-proofer-ignore></p><p>Finally, I’ll enable PDF and CSV formats, add a cover page, table of contents and a footer.</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-28.png" alt="PolarClouds Report Layout Options" data-proofer-ignore></p><p>Save, find in the list and run the report against vSphere World:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-29.png" alt="Run the Report" data-proofer-ignore></p><p>And here is the report:</p><p><img data-src="/images/vsphere-compliance-with-vro-pt2/vsphere-compliance-with-vro-pt2-30.png" alt="PolarClouds Report" data-proofer-ignore></p><p>Grab your copy of the report: <a href="/documents/PolarClouds-Lab-CIS-Compliance.pdf" target="_blank">PDF</a> [CSV])</p><p>As you can see, I added a slightly tweaked version of the dashboard to the report too, thus making a nice summary page :sunglasses:</p><h2 id="conclusion-and-wrap-up"><span class="mr-2">Conclusion and Wrap Up</span><a href="#conclusion-and-wrap-up" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>So there we have it.</p><p>In this post we looked at creating dashboards, views and reports to publicise our example PolarClouds lab environment CIS compliance and and non-compliances further.</p><p>All that is left is to harden the environment keeping an eye on our dashboard and reports as we go.</p><p>As you will have seen over the course of this series, vRealize Operations is able to assist with meeting and reporting security compliance across the vSphere estate and ensuring that compliance remains in place via dashboards and reports.</p><h3 id="chris-final-thought-1"><span class="mr-2">Chris’ Final Thought 1</span><a href="#chris-final-thought-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://en.wikipedia.org/wiki/Trust,_but_verify" target="_blank">Trust, but verify</a>. Compliance standards can and will change.</p><p>Therefore don’t take VMware’s vRO compliance as the final word for a compliant environment. Third party compliance scanning solutions such as those available from <a href="https://www.tenable.com/solutions/compliance" target="_blank">Tenable</a> and <a href="https://www.qualys.com/solutions/compliance/" target="_blank">Qualys</a> exist for a reason.</p><h3 id="chris-final-thought-2"><span class="mr-2">Chris’ Final Thought 2</span><a href="#chris-final-thought-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Usual disclaimer applies. <br /> And that’s it!<br /></p><p>As mentioned, this post is part 2 of a multipart series. Find the other parts here:</p><ul><li>Part 1: <a href="/posts/vsphere-compliance-with-vro/" target="_blank">Creating Continual Regulatory Compliance</a>)<li>Part 2: This part: Monitoring and Reporting Regulatory Compliance</ul><p>As I said at the end of part 1:<br /> <em>Sure compliance is a dry and often a difficult subject to crack, however hopefully with the use of a automated and continuous monitoring tool such as vRealize Operations, we can ensure that our vSphere environment is always meeting its required compliance standard, whatever standard that may be.</em></p><p>-Chris</p></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/pro-tip/" class="post-tag no-text-decoration" >Pro-Tip</a> <a href="/tags/vmware/" class="post-tag no-text-decoration" >VMware</a> <a href="/tags/deployment/" class="post-tag no-text-decoration" >Deployment</a> <a href="/tags/esxi/" class="post-tag no-text-decoration" >ESXi</a> <a href="/tags/vrealize/" class="post-tag no-text-decoration" >vRealize</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=vSphere+Compliance+with+vRealize+Operations+and+Tagging+-+Part+2+-+PolarClouds&url=%2Fposts%2Fvsphere-compliance-with-vro-pt2%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=vSphere+Compliance+with+vRealize+Operations+and+Tagging+-+Part+2+-+PolarClouds&u=%2Fposts%2Fvsphere-compliance-with-vro-pt2%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2Fvsphere-compliance-with-vro-pt2%2F&text=vSphere+Compliance+with+vRealize+Operations+and+Tagging+-+Part+2+-+PolarClouds" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=%2Fposts%2Fvsphere-compliance-with-vro-pt2%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="https://reddit.com/submit?url=%2Fposts%2Fvsphere-compliance-with-vro-pt2%2F&title=vSphere+Compliance+with+vRealize+Operations+and+Tagging+-+Part+2+-+PolarClouds" data-toggle="tooltip" data-placement="top" title="Reddit" target="_blank" rel="noopener" aria-label="Reddit"> <i class="fa-fw fab fa-reddit"></i> </a> <a href="http://service.weibo.com/share/share.php?title=vSphere+Compliance+with+vRealize+Operations+and+Tagging+-+Part+2+-+PolarClouds&url=%2Fposts%2Fvsphere-compliance-with-vro-pt2%2F" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank" rel="noopener" aria-label="Weibo"> <i class="fa-fw fab fa-weibo"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/vsphere-compliance-with-vro-pt2/">vSphere Compliance with vRealize Operations and Tagging - Part 2</a><li><a href="/posts/powershell-credential-handling/">PowerShell Credential Handling</a><li><a href="/posts/esxi-rpi-ups-pt1/">UPS Triggered Shut Down of ESXi from Raspberry Pi - Part 1</a><li><a href="/posts/esxi-rpi-ups-pt2/">UPS Triggered Shut Down of ESXi from Raspberry Pi - Part 2</a><li><a href="/posts/esxi-rpi-ups-pt3/">UPS Triggered Shut Down of ESXi from Raspberry Pi - Part 3</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/pro-tip/">Pro-Tip</a> <a class="post-tag" href="/tags/deployment/">Deployment</a> <a class="post-tag" href="/tags/esxi/">ESXi</a> <a class="post-tag" href="/tags/vmware/">VMware</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/vrealize/">vRealize</a> <a class="post-tag" href="/tags/powershell/">PowerShell</a> <a class="post-tag" href="/tags/rubrik/">Rubrik</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/vsphere-compliance-with-vro/"><div class="card-body"> <em class="small" data-ts="1656374400" data-df="ll" > Jun 28, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>vSphere Compliance with vRealize Operations and Tagging</h3><div class="text-muted small"><p> In these days of anywhere computing, one of the tools in the arsenal of the good guys is system hardening. But what is system hardening? System hardening is defined as the practice of reducing a ...</p></div></div></a></div><div class="card"> <a href="/posts/esxi-rpi-ups-pt1/"><div class="card-body"> <em class="small" data-ts="1618963200" data-df="ll" > Apr 21, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>UPS Triggered Shut Down of ESXi from Raspberry Pi - Part 1</h3><div class="text-muted small"><p> By the shear luck of being in the right place at the right time, I managed to get my hands on an APC Smart-UPS C1500 Uninterruptable Power Supply (UPS) for my home lab use. A UPS is a piece of ha...</p></div></div></a></div><div class="card"> <a href="/posts/esxi-rpi-ups-pt2/"><div class="card-body"> <em class="small" data-ts="1620086400" data-df="ll" > May 4, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>UPS Triggered Shut Down of ESXi from Raspberry Pi - Part 2</h3><div class="text-muted small"><p> Last time we looked at what needs to happen should we loose the input mains electricity supply to our newly acquired Uninterruptable Power Supply (UPS). For example during a power cut. We also go...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/vsphere-compliance-with-vro/" class="btn btn-outline-primary" prompt="Older"><p>vSphere Compliance with vRealize Operations and Tagging</p></a> <a href="/posts/esxi-rpi-ups-pt3/" class="btn btn-outline-primary" prompt="Newer"><p>UPS Triggered Shut Down of ESXi from Raspberry Pi - Part 3</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/chall32">Chris Hall</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/pro-tip/">Pro-Tip</a> <a class="post-tag" href="/tags/deployment/">Deployment</a> <a class="post-tag" href="/tags/esxi/">ESXi</a> <a class="post-tag" href="/tags/vmware/">VMware</a> <a class="post-tag" href="/tags/linux/">Linux</a> <a class="post-tag" href="/tags/vrealize/">vRealize</a> <a class="post-tag" href="/tags/powershell/">PowerShell</a> <a class="post-tag" href="/tags/rubrik/">Rubrik</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en-gb.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
